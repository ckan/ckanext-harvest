<html xmlns:py="http://genshi.edgewall.org/"
  xmlns:i18n="http://genshi.edgewall.org/i18n"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  py:strip="">

  <py:def function="page_title">${c.pkg.title or c.pkg.name} - WMS preview</py:def>

  <py:def function="optional_head">
    <link type="text/css" rel="stylesheet" media="all" href="/ckanext/harvest/mapviewer.css" />
    <script type="text/javascript" src="/ckanext/harvest/js/openlayers/OpenLayers_ckan.js"></script>
    <script type="text/javascript" src="/ckanext/harvest/js/mapviewer.js"></script>
  </py:def>
  
<div py:match="content">
  <div class="map-view-content">
    <h2 class="head">
      ${c.pkg.title}
    </h2>
    
    <!-- Source URL -->    
    <div class="url" py:if="c.pkg.url">
      <p>
        Source: <a href="${c.wms.url}" target="_blank">${c.wms.url}</a>
      </p>
    </div>
    <p>
    <a
      href="${url(controller='package', action='read', id=c.pkg.name)}"
      title="Package Details">
      Package details</a>
    </p>
      <div class="package subsection">
      <h3>WMS preview</h3>
      <script type="text/javascript">
        //<![CDATA[
        $(document).ready(function(){
            CKAN.MapViewer.setup("${c.wms.url}");
        })
        //]]>
      </script>
    <div id="map"></div>
    <div id="layers"></div>
    </div>
  </div>
</div>
<xi:include href="../../layout.html" />
</html>
